pipeline{
   agent any
   stages{
       stage('Clone repo'){
           steps{
               git branch:'main', url: 'https://github.com/poona-08/two-tier-flask-app.git'
           }
        }
        stage('Build images'){
            steps{
                sh 'docker build -t flask-app .'
            }
         }
        stage('deploy with docker compose'){
            steps{
                sh 'docker compose down || true'
                
                sh 'docker compose up -d --build'
            }
         }
    }
}                  
